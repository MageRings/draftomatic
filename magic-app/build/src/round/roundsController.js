var Magic;
(function (Magic) {
    var App;
    (function (App) {
        var Round;
        (function (Round) {
            var RoundsController = (function () {
                function RoundsController($scope, $stateParams, $http) {
                    var _this = this;
                    this.tournamentId = $stateParams["id"];
                    this.scope = $scope;
                    this.http = $http;
                    this.http.get("api/tournament/status/" + this.tournamentId).then(function (response) {
                        console.log(response);
                        _this.tournament = response.data.tournamentData;
                        _this.tournament.currentRound = response.data.currentRound;
                        var r1Matches = _this.tournament.rounds[0].matches;
                        _this.seatings = new Array(r1Matches.length * 2);
                        for (var i = 0; i < r1Matches.length; i++) {
                            _this.seatings[i] = r1Matches[i].pairing.player1.name;
                            _this.seatings[i + r1Matches.length] = r1Matches[i].pairing.player2.name;
                        }
                    });
                    this.pingHeroku();
                }
                //for heroku, we need to ping the server to keep it from falling asleep every 30 minutes while the tournament is running
                RoundsController.prototype.pingHeroku = function () {
                    var scope = this;
                    var myInterval = setInterval(function () {
                        if (scope.tournament && scope.tournament.complete) {
                            clearInterval(myInterval);
                        }
                        else {
                            scope.http.get("api/tournament/status/" + scope.tournamentId).then(function (response) {
                                // we can get zombie intervals if the user doesn't finish a tournament and starts another
                                if (window.location.href.indexOf(response.data.tournamentData.id) === -1) {
                                    clearInterval(myInterval);
                                }
                            });
                        }
                    }, 600000);
                };
                RoundsController.prototype.pairNextRound = function () {
                    var _this = this;
                    var latestRound = this.tournament.rounds[this.tournament.currentRound - 1];
                    latestRound.complete = true;
                    this.http.put("api/tournament/results/" + this.tournamentId, latestRound.matches).then(function (response) {
                        console.log(response);
                        _this.tournament.rounds.push(response.data);
                        _this.tournament.currentRound = response.data.number;
                    });
                };
                RoundsController.prototype.getFinalStandings = function () {
                    var _this = this;
                    this.tournament.complete = true;
                    var latestRound = this.tournament.rounds[this.tournament.currentRound - 1];
                    latestRound.complete = true;
                    this.http.put("api/tournament/results/" + this.tournamentId, latestRound.matches).then(function () {
                        _this.http.get("api/tournament/standings/" + _this.tournamentId, { round: latestRound.number }).then(function (response) {
                            console.log(response);
                        });
                    });
                };
                RoundsController.prototype.downloadTournamentData = function () {
                    window.location.href = "api/tournament/export/" + this.tournamentId;
                };
                RoundsController.$inject = ["$scope", "$stateParams", "$http"];
                return RoundsController;
            })();
            Round.RoundsController = RoundsController;
            App.magic.controller("roundsController", RoundsController);
        })(Round = App.Round || (App.Round = {}));
    })(App = Magic.App || (Magic.App = {}));
})(Magic || (Magic = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJvdW5kL3JvdW5kc0NvbnRyb2xsZXIudHMiXSwibmFtZXMiOlsiTWFnaWMiLCJNYWdpYy5BcHAiLCJNYWdpYy5BcHAuUm91bmQiLCJNYWdpYy5BcHAuUm91bmQuUm91bmRzQ29udHJvbGxlciIsIk1hZ2ljLkFwcC5Sb3VuZC5Sb3VuZHNDb250cm9sbGVyLmNvbnN0cnVjdG9yIiwiTWFnaWMuQXBwLlJvdW5kLlJvdW5kc0NvbnRyb2xsZXIucGluZ0hlcm9rdSIsIk1hZ2ljLkFwcC5Sb3VuZC5Sb3VuZHNDb250cm9sbGVyLnBhaXJOZXh0Um91bmQiLCJNYWdpYy5BcHAuUm91bmQuUm91bmRzQ29udHJvbGxlci5nZXRGaW5hbFN0YW5kaW5ncyIsIk1hZ2ljLkFwcC5Sb3VuZC5Sb3VuZHNDb250cm9sbGVyLmRvd25sb2FkVG91cm5hbWVudERhdGEiXSwibWFwcGluZ3MiOiJBQUFBLElBQU8sS0FBSyxDQXdFWDtBQXhFRCxXQUFPLEtBQUs7SUFBQ0EsSUFBQUEsR0FBR0EsQ0F3RWZBO0lBeEVZQSxXQUFBQSxHQUFHQTtRQUFDQyxJQUFBQSxLQUFLQSxDQXdFckJBO1FBeEVnQkEsV0FBQUEsS0FBS0EsRUFBQ0EsQ0FBQ0E7WUFFcEJDO2dCQVFJQywwQkFBWUEsTUFBaUJBLEVBQUVBLFlBQXVDQSxFQUFFQSxLQUFzQkE7b0JBUmxHQyxpQkFtRUNBO29CQTFET0EsSUFBSUEsQ0FBQ0EsWUFBWUEsR0FBR0EsWUFBWUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ3ZDQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxNQUFNQSxDQUFDQTtvQkFDcEJBLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLEtBQUtBLENBQUNBO29CQUNsQkEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBTUEsd0JBQXdCQSxHQUFHQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFDQSxRQUFRQTt3QkFDM0VBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO3dCQUN0QkEsS0FBSUEsQ0FBQ0EsVUFBVUEsR0FBR0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsY0FBY0EsQ0FBQ0E7d0JBQy9DQSxLQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxZQUFZQSxHQUFHQSxRQUFRQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQTt3QkFDMURBLElBQUlBLFNBQVNBLEdBQUdBLEtBQUlBLENBQUNBLFVBQVVBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBO3dCQUNsREEsS0FBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsSUFBSUEsS0FBS0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsTUFBTUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7d0JBQ2hEQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxTQUFTQSxDQUFDQSxNQUFNQSxFQUFFQSxDQUFDQSxFQUFFQSxFQUFFQSxDQUFDQTs0QkFDeENBLEtBQUlBLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBLEdBQUdBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLENBQUNBLElBQUlBLENBQUNBOzRCQUNyREEsS0FBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsR0FBR0EsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0E7d0JBQzVFQSxDQUFDQTtvQkFDTEEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7b0JBQ0hBLElBQUlBLENBQUNBLFVBQVVBLEVBQUVBLENBQUNBO2dCQUN0QkEsQ0FBQ0E7Z0JBRURELHdIQUF3SEE7Z0JBQ2hIQSxxQ0FBVUEsR0FBbEJBO29CQUNJRSxJQUFJQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQTtvQkFD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b0JBQ0lLLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLEdBQUdBLHdCQUF3QkEsR0FBR0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0E7Z0JBQ3hFQSxDQUFDQTtnQkE5RGFMLHdCQUFPQSxHQUFHQSxDQUFDQSxRQUFRQSxFQUFFQSxjQUFjQSxFQUFFQSxPQUFPQSxDQUFDQSxDQUFDQTtnQkErRGhFQSx1QkFBQ0E7WUFBREEsQ0FuRUFELEFBbUVDQyxJQUFBRDtZQW5FWUEsc0JBQWdCQSxtQkFtRTVCQSxDQUFBQTtZQUVEQSxTQUFLQSxDQUFDQSxVQUFVQSxDQUFDQSxrQkFBa0JBLEVBQUVBLGdCQUFnQkEsQ0FBQ0EsQ0FBQ0E7UUFDM0RBLENBQUNBLEVBeEVnQkQsS0FBS0EsR0FBTEEsU0FBS0EsS0FBTEEsU0FBS0EsUUF3RXJCQTtJQUFEQSxDQUFDQSxFQXhFWUQsR0FBR0EsR0FBSEEsU0FBR0EsS0FBSEEsU0FBR0EsUUF3RWZBO0FBQURBLENBQUNBLEVBeEVNLEtBQUssS0FBTCxLQUFLLFFBd0VYIiwiZmlsZSI6InJvdW5kL3JvdW5kc0NvbnRyb2xsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUgTWFnaWMuQXBwLlJvdW5kIHtcblxuICAgIGV4cG9ydCBjbGFzcyBSb3VuZHNDb250cm9sbGVyIHtcbiAgICAgICAgcHJpdmF0ZSBzY29wZTogbmcuSVNjb3BlO1xuICAgICAgICBwdWJsaWMgdG91cm5hbWVudDogYW55O1xuICAgICAgICBwdWJsaWMgc2VhdGluZ3M6IGFueTtcbiAgICAgICAgcHVibGljIHN0YXRpYyAkaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJHN0YXRlUGFyYW1zXCIsIFwiJGh0dHBcIl07XG4gICAgICAgIHByaXZhdGUgdG91cm5hbWVudElkIDogc3RyaW5nO1xuICAgICAgICBwcml2YXRlIGh0dHAgOiBuZy5JSHR0cFNlcnZpY2U7XG4gICAgICAgIFxuICAgICAgICBjb25zdHJ1Y3Rvcigkc2NvcGU6IG5nLklTY29wZSwgJHN0YXRlUGFyYW1zOiBuZy51aS5JU3RhdGVQYXJhbXNTZXJ2aWNlLCAkaHR0cDogbmcuSUh0dHBTZXJ2aWNlKSB7XG4gICAgICAgICAgICB0aGlzLnRvdXJuYW1lbnRJZCA9ICRzdGF0ZVBhcmFtc1tcImlkXCJdO1xuICAgICAgICAgICAgdGhpcy5zY29wZSA9ICRzY29wZTtcbiAgICAgICAgICAgIHRoaXMuaHR0cCA9ICRodHRwO1xuICAgICAgICAgICAgdGhpcy5odHRwLmdldDxhbnk+KFwiYXBpL3RvdXJuYW1lbnQvc3RhdHVzL1wiICsgdGhpcy50b3VybmFtZW50SWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMudG91cm5hbWVudCA9IHJlc3BvbnNlLmRhdGEudG91cm5hbWVudERhdGE7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VybmFtZW50LmN1cnJlbnRSb3VuZCA9IHJlc3BvbnNlLmRhdGEuY3VycmVudFJvdW5kO1xuICAgICAgICAgICAgICAgIHZhciByMU1hdGNoZXMgPSB0aGlzLnRvdXJuYW1lbnQucm91bmRzWzBdLm1hdGNoZXM7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWF0aW5ncyA9IG5ldyBBcnJheShyMU1hdGNoZXMubGVuZ3RoICogMik7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByMU1hdGNoZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWF0aW5nc1tpXSA9IHIxTWF0Y2hlc1tpXS5wYWlyaW5nLnBsYXllcjEubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWF0aW5nc1tpICsgcjFNYXRjaGVzLmxlbmd0aF0gPSByMU1hdGNoZXNbaV0ucGFpcmluZy5wbGF5ZXIyLm5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnBpbmdIZXJva3UoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy9mb3IgaGVyb2t1LCB3ZSBuZWVkIHRvIHBpbmcgdGhlIHNlcnZlciB0byBrZWVwIGl0IGZyb20gZmFsbGluZyBhc2xlZXAgZXZlcnkgMzAgbWludXRlcyB3aGlsZSB0aGUgdG91cm5hbWVudCBpcyBydW5uaW5nXG4gICAgICAgIHByaXZhdGUgcGluZ0hlcm9rdSgpIHtcbiAgICAgICAgICAgIHZhciBzY29wZSA9IHRoaXM7XG4gICAgICAgICAgICB2YXIgbXlJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2NvcGUudG91cm5hbWVudCAmJiBzY29wZS50b3VybmFtZW50LmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobXlJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuaHR0cC5nZXQ8YW55PihcImFwaS90b3VybmFtZW50L3N0YXR1cy9cIiArIHNjb3BlLnRvdXJuYW1lbnRJZCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGNhbiBnZXQgem9tYmllIGludGVydmFscyBpZiB0aGUgdXNlciBkb2Vzbid0IGZpbmlzaCBhIHRvdXJuYW1lbnQgYW5kIHN0YXJ0cyBhbm90aGVyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXNwb25zZS5kYXRhLnRvdXJuYW1lbnREYXRhLmlkKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKG15SW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDYwMDAwMCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBwYWlyTmV4dFJvdW5kKCkge1xuICAgICAgICAgICAgdmFyIGxhdGVzdFJvdW5kID0gdGhpcy50b3VybmFtZW50LnJvdW5kc1t0aGlzLnRvdXJuYW1lbnQuY3VycmVudFJvdW5kLTFdO1xuICAgICAgICAgICAgbGF0ZXN0Um91bmQuY29tcGxldGUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5odHRwLnB1dDxhbnk+KFwiYXBpL3RvdXJuYW1lbnQvcmVzdWx0cy9cIiArIHRoaXMudG91cm5hbWVudElkLCBsYXRlc3RSb3VuZC5tYXRjaGVzKS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvdXJuYW1lbnQucm91bmRzLnB1c2gocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VybmFtZW50LmN1cnJlbnRSb3VuZCA9IHJlc3BvbnNlLmRhdGEubnVtYmVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBnZXRGaW5hbFN0YW5kaW5ncygpIHtcbiAgICAgICAgICAgIHRoaXMudG91cm5hbWVudC5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgbGF0ZXN0Um91bmQgPSB0aGlzLnRvdXJuYW1lbnQucm91bmRzW3RoaXMudG91cm5hbWVudC5jdXJyZW50Um91bmQtMV07XG4gICAgICAgICAgICBsYXRlc3RSb3VuZC5jb21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmh0dHAucHV0PGFueT4oXCJhcGkvdG91cm5hbWVudC9yZXN1bHRzL1wiICsgdGhpcy50b3VybmFtZW50SWQsIGxhdGVzdFJvdW5kLm1hdGNoZXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaHR0cC5nZXQ8YW55PihcImFwaS90b3VybmFtZW50L3N0YW5kaW5ncy9cIiArIHRoaXMudG91cm5hbWVudElkLCB7cm91bmQgOiBsYXRlc3RSb3VuZC5udW1iZXJ9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHVibGljIGRvd25sb2FkVG91cm5hbWVudERhdGEoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiYXBpL3RvdXJuYW1lbnQvZXhwb3J0L1wiICsgdGhpcy50b3VybmFtZW50SWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtYWdpYy5jb250cm9sbGVyKFwicm91bmRzQ29udHJvbGxlclwiLCBSb3VuZHNDb250cm9sbGVyKTtcbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==